<!DOCTYPE html>
<html ng-app="exampleapp">
<head>
  <title>Datatables Angular Directives</title>  

  <!-- These 3 files are the dependencies. jQuery, Angular and the datatables library file. -->
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="js/dataTables.bootstrap.js"></script>
  <!-- End -->

  <!-- This is the directive file -->
  <script type="text/javascript" src="js/angular.min.js"></script>
  <script type="text/javascript" src="js/angular.datatables.js"></script>
  <!-- End -->

  <!-- These files are strictly for styling. Ignore these they are not important -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/dataTables.bootstrap.css">
  <!-- End -->

  <!-- This the Angular controller -->    
  <script type="text/javascript">
    // You need to enable the datatablesDirectives 
    var app = angular.module('exampleapp', ['datatablesDirectives']);
    app.controller('ExampleCtrl', function($scope, $window, $location) {
      
      // The directives automatically detects a dtOptions directive.
      // It will act as a default options for all the datatables in the scope. This is not necessary.
      $scope.dtOptions = {
        
        iDisplayLength: 5,
        // These 2 lines are for styling. Ignore!
        sDom: "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
        sPaginationType: "bootstrap",
        // End
      }
      // These are the options for the second DT. It's set in the element tags.
      $scope.dtOptionsExample2 = {
        sAjaxSource: 'js/data.json',
        sAjaxDataProp: 'result',
        bProcessing: false,
        fnRowCallback: function(row, data, index, fullindex) {
          if (data.id === 1) {
            angular.element(row).addClass('blue');
          }
        }
      }
      // This is an example of column callback
      $scope.idCB = function(data) {
        if (data.id > 3) {
          return '<span class="label label-info">'+data.id+'</span>'
        } 
        return '<span class="label label-important">'+data.id+'</span>'
      }
      // Anoter example
      $scope.aboutCB = function(data) {
        return data.about.text.substring(0, 50) + '...';
      }
    })
  </script>
  <!-- End -->



</head>
<body ng-controller="ExampleCtrl">

  <div class="container">

    <div class="row">
      <div class="span12">
        <h1>Datatables Directives</h1>
      </div>
    </div>

    <div class="row">

      <div class="span12">
        <h3>Example 1 - Simple</h3>

        <table datatable sAjaxSource="js/data.json" sAjaxDataProp="result" class="table table-striped table-bordered">
          <thead>
            <tr>
              <th data-mdata="id" data-sclass="highlight-red">ID</th>
              <th data-mdata="name">Name</th>
              <th data-mdata="about.text" data-bvisible="false">About me</th>
              <th data-mdata="phone">Phone</th>
              <th data-mdata="email">Email</th>
              <th data-mdata="age">Age</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

      </div>

    </div>



    <div class="row">

      <div class="span12">
        <h3>Example 2 - with column callbacks and options from controller</h3>
        <table datatable dtOptions="dtOptionsExample2" class="table table-striped table-bordered">
          <thead>
            <tr>
              <th data-mdata="idCB()" data-sclass="text-center">ID</th>
              <th data-mdata="name">Name</th>
              <th data-mdata="aboutCB()">About me</th>
              <th data-mdata="phone">Phone</th>
              <th data-mdata="email">Email</th>
              <th data-mdata="age">Age</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>